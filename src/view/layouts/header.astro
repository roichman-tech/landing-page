---
import type { HeaderContent } from '@/app/i18n/home';

import { BrFlag } from '@/assets/icons/br-flag';
import { UsFlag } from '@/assets/icons/us-flag';

import { MobileMenu } from '@/view/layouts/mobile-menu';

interface Props {
  content: HeaderContent;
}

const { content } = Astro.props;

const FlagComponent = content.languageSwitch.flag === 'us' ? UsFlag : BrFlag;

const ctaClasses =
  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 gradient-accent text-primary-foreground shadow-soft hover:shadow-glow hover:scale-[1.02] active:scale-[0.98] h-9 px-4';
---

<header
  class="fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border/50"
>
  <div class="container flex items-center justify-between h-16 md:h-20">
    <a href="/" class="flex items-center">
      <img
        src="/images/logo.webp"
        fetchpriority="high"
        width={235}
        height={56}
        alt="Roichman Tech"
        class="h-8 md:h-10 w-auto"
      />
    </a>

    <nav class="hidden md:flex items-center gap-6">
      {
        content.navLinks.map((link) => (
          <a
            href={link.href}
            class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
          >
            {link.label}
          </a>
        ))
      }

      <a href={content.ctaHref} class={ctaClasses}>
        {content.ctaLabel}
      </a>

      <a
        href={content.languageSwitch.href}
        class="text-base font-semibold text-primary hover:text-primary/80 transition-colors flex items-center gap-2"
        aria-label={content.languageSwitch.ariaLabel}
        title={content.languageSwitch.label}
      >
        <span class="inline-flex">
          <FlagComponent
            className="size-5"
            aria-label={content.languageSwitch.label}
          />
        </span>
        <span class="sr-only">{content.languageSwitch.label}</span>
      </a>
    </nav>

    <MobileMenu content={content} client:idle />
  </div>
</header>
